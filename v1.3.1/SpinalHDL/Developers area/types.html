

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Types &mdash; SpinalHDL  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/logo3_32x32.png"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/wavedrom/2.6.8/skins/default.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/wavedrom/2.6.8/wavedrom.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="How to HACK this documentation" href="howtodocument.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> SpinalHDL
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../About%20SpinalHDL/index.html">About SpinalHDL</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../About%20SpinalHDL/faq.html">FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../About%20SpinalHDL/support.html">Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../About%20SpinalHDL/users.html">Users</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Getting%20Started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Getting%20Started/getting_started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Getting%20Started/motivation.html">Motivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Getting%20Started/presentation.html">Presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Getting%20Started/Scala%20Guide/index.html">Scala Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Getting%20Started/Scala%20Guide/basics.html">Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Getting%20Started/Scala%20Guide/coding_conventions.html">Coding conventions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Getting%20Started/Scala%20Guide/interaction.html">Interaction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Getting%20Started/Help%20for%20VHDL%20people/index.html">Help for VHDL people</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Getting%20Started/Help%20for%20VHDL%20people/vhdl_comp.html">VHDL comparison</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Getting%20Started/Help%20for%20VHDL%20people/vhdl_perspective.html">VHDL equivalences</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Getting%20Started/Cheatsheets/index.html">Cheatsheets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Getting%20Started/Cheatsheets/core.html">Core</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Getting%20Started/Cheatsheets/lib.html">Lib</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Getting%20Started/Cheatsheets/symbolic.html">Symbolic</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Data%20types/index.html">Data types</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Data%20types/bool.html">Bool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Data%20types/bits.html">Bits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Data%20types/Int.html">Unit/SInt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Data%20types/enum.html">SpinalEnum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Data%20types/bundle.html">Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Data%20types/Vec.html">Vec</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Data%20types/Fix.html">UFix/SFix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Data%20types/Floating.html">Floating</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Structuring/index.html">Structuring</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Structuring/components_hierarchy.html">Component and hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Structuring/area.html">Area</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Structuring/function.html">Function</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Structuring/clock_domain.html">Clock domains</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Structuring/blackbox.html">Instanciate VHDL and Verilog IP</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Semantic/index.html">Semantic</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Semantic/assignements.html">Assignments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Semantic/when_switch.html">When/Switch/Mux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Semantic/sementic.html">Rules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Sequential%20logic/index.html">Sequential logic</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Sequential%20logic/registers.html">Registers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Sequential%20logic/memory.html">RAM/ROM</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Design%20errors/index.html">Design errors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Design%20errors/assignment_overlap.html">Assignement overlap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Design%20errors/clock_crossing_violation.html">Clock crossing violation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Design%20errors/combinatorial_loop.html">Combinational loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Design%20errors/hierarchy_violation.html">Hierarchy violation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Design%20errors/iobundle.html">Io bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Design%20errors/latch_detected.html">Latch detected</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Design%20errors/no_driver_on.html">No driver on</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Design%20errors/nullpointerexception.html">NullPointerException</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Design%20errors/register_defined_as_component_input.html">Register defined as component input</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Design%20errors/scope_violation.html">Scope violation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Design%20errors/spinal_cant_clone.html">Spinal can’t clone class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Design%20errors/unassigned_register.html">Unassigned register</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Design%20errors/unreachable_is_statement.html">Unreachable is statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Design%20errors/width_mismatch.html">Width mismatch</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Other%20language%20features/index.html">Other language features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Other%20language%20features/utils.html">Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Other%20language%20features/assertion.html">Assertions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Other%20language%20features/analog_inout.html">Analog and inout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Other%20language%20features/vhdl_generation.html">VHDL and Verilog generation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Libraries/index.html">Libraries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Libraries/utils.html">Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Libraries/stream.html">Stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Libraries/flow.html">Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Libraries/fragment.html">Fragment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Libraries/fsm.html">State machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Libraries/vexriscv.html">VexRiscv (RV32IM CPU)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Libraries/bus_slave_factory.html">Bus Slave Factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Libraries/Bus/index.html">Bus</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Libraries/Bus/amba3/ahblite3.html">AHB-Lite3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Libraries/Bus/amba3/apb3.html">Apb3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Libraries/Bus/amba4/axi4.html">Axi4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Libraries/Bus/avalon/avalonmm.html">AvalonMM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Libraries/Com/index.html">Com</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Libraries/Com/uart.html">UART</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Libraries/IO/index.html">IO</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Libraries/IO/readableOpenDrain.html">ReadableOpenDrain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Libraries/IO/tristate.html">TriState</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Libraries/Graphics/index.html">Graphics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Libraries/Graphics/colors.html">Colors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Libraries/Graphics/vga.html">VGA</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Libraries/EDA/index.html">EDA</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Libraries/EDA/altera/qsysify.html">QSysify</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Simulation/index.html">Simulation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Simulation/install.html">Setup and installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Simulation/bootstraps.html">Boot a simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Simulation/signal.html">Accessing signals of the simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Simulation/clock.html">Clock domains</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Simulation/threadFull.html">Thread-full API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Simulation/threadLess.html">Thread-less API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Simulation/engine.html">Simulation engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Simulation/examples/index.html">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Simulation/examples/asynchronous.html">Asynchronous adder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Simulation/examples/dual_clock_fifo.html">Dual clock fifo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Simulation/examples/single_clock_fifo.html">Single clock fifo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Simulation/examples/synchronous.html">Synchronous adder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Simulation/examples/uart_decoder.html">Uart decoder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Simulation/examples/uart_encoder.html">Uart encoder</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Examples/index.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Examples/Simple%20ones/index.html">Simple ones</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Examples/Simple%20ones/apb3.html">APB3 definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Examples/Simple%20ones/carry_adder.html">Carry adder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Examples/Simple%20ones/color_summing.html">Color summing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Examples/Simple%20ones/counter_with_clear.html">Counter with clear</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Examples/Simple%20ones/introduction.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Examples/Simple%20ones/pll_resetctrl.html">PLL BlackBox and reset controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Examples/Simple%20ones/rgb_to_gray.html">RGB to gray</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Examples/Simple%20ones/sinus_rom.html">Sinus rom</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Examples/Intermediates%20ones/index.html">Intermediates ones</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Examples/Intermediates%20ones/fractal.html">Fractal calculator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Examples/Intermediates%20ones/uart.html">UART</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Examples/Intermediates%20ones/vga.html">VGA</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Examples/Advanced%20ones/index.html">Advanced ones</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Examples/Advanced%20ones/jtag.html">JTAG TAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Examples/Advanced%20ones/memory_mapped_uart.html">Memory mapped UART</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Examples/Advanced%20ones/pinesec.html">Pinesec</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Examples/Advanced%20ones/timer.html">Timer</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Legacy/index.html">Legacy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Legacy/riscv.html">RiscV</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Legacy/pinsec/index.html">pinsec</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Legacy/pinsec/hardware.html">Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Legacy/pinsec/hardware_toplevel.html">SoC toplevel (Pinsec)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Legacy/pinsec/introduction.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Legacy/pinsec/software.html">Software</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developers area</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="bus_slave_factory_impl.html">Bus Slave Factory Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtodocument.html">How to HACK this documentation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Types</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SpinalHDL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Developers area</a> &raquo;</li>
        
      <li>Types</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/SpinalHDL/Developers area/types.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="types">
<h1>Types<a class="headerlink" href="#types" title="Permalink to this heading">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>The language provides 5 base types and 2 composite types that can be used.</p>
<ul class="simple">
<li><p>Base types : <code class="docutils literal notranslate"><span class="pre">Bool</span></code>, <code class="docutils literal notranslate"><span class="pre">Bits</span></code>, <code class="docutils literal notranslate"><span class="pre">UInt</span></code> for unsigned integers, <code class="docutils literal notranslate"><span class="pre">SInt</span></code> for signed integers, <code class="docutils literal notranslate"><span class="pre">Enum</span></code>.</p></li>
<li><p>Composite types : Bundle, Vec.</p></li>
</ul>
<a class="reference internal image-reference" href="../../_images/types.svg"><img alt="../../_images/types.svg" class="align-center" src="../../_images/types.svg" width="300" /></a>
<p>Those types and their usage (with examples) are explained hereafter.</p>
<p>About the fixed point support it’s documented <a class="reference internal" href="../Data%20types/Fix.html#fixed"><span class="std std-ref">there</span></a></p>
</div>
<div class="section" id="bool">
<h2>Bool<a class="headerlink" href="#bool" title="Permalink to this heading">¶</a></h2>
<p>This is the standard <em>boolean</em> type that correspond to a bit.</p>
<div class="section" id="declaration">
<h3>Declaration<a class="headerlink" href="#declaration" title="Permalink to this heading">¶</a></h3>
<p>The syntax to declare such as value is as follows:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 50%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Return</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Bool or Bool()</p></td>
<td><p>Create a Bool</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-odd"><td><p>True</p></td>
<td><p>Create a Bool assigned with <code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-even"><td><p>False</p></td>
<td><p>Create a Bool assigned with <code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-odd"><td><p>Bool(value : Boolean)</p></td>
<td><p>Create a Bool assigned with a Scala Boolean</p></td>
<td><p>Bool</p></td>
</tr>
</tbody>
</table>
<p>Using this type into SpinalHDL yields:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="n">myBool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Bool</span><span class="p">()</span><span class="w"></span>
<span class="n">myBool</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nc">False</span><span class="w">         </span><span class="c1">// := is the assignment operator</span>
<span class="n">myBool</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nc">Bool</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="w">   </span><span class="c1">// Use a Scala Boolean to create a literal</span>
</pre></div>
</div>
</div>
<div class="section" id="operators">
<h3>Operators<a class="headerlink" href="#operators" title="Permalink to this heading">¶</a></h3>
<p>The following operators are available for the <code class="docutils literal notranslate"><span class="pre">Bool</span></code> type</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 70%" />
<col style="width: 10%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operator</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Return type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>!x</p></td>
<td><p>Logical NOT</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">x &amp;&amp; y</div>
<div class="line">x &amp; y</div>
</div>
</td>
<td><p>Logical AND</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">x || y</div>
<div class="line">x | y</div>
</div>
</td>
<td><p>Logical OR</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-odd"><td><p>x ^ y</p></td>
<td><p>Logical XOR</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-even"><td><p>x.set[()]</p></td>
<td><p>Set x to True</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>x.clear[()]</p></td>
<td><p>Set x to False</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>x.rise[()]</p></td>
<td><p>Return True when x was low at the last cycle and is now high</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-odd"><td><p>x.rise(initAt : Bool)</p></td>
<td><p>Same as x.rise but with a reset value</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-even"><td><p>x.fall[()]</p></td>
<td><p>Return True when x was high at the last cycle and is now low</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-odd"><td><p>x.fall(initAt : Bool)</p></td>
<td><p>Same as x.fall but with a reset value</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-even"><td><p>x.setWhen(cond)</p></td>
<td><p>Set x when cond is True</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-odd"><td><p>x.clearWhen(cond)</p></td>
<td><p>Clear x when cond is True</p></td>
<td><p>Bool</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="the-bitvector-family-bits-uint-sint">
<h2>The BitVector family - (<code class="docutils literal notranslate"><span class="pre">Bits</span></code>, <code class="docutils literal notranslate"><span class="pre">UInt</span></code>, <code class="docutils literal notranslate"><span class="pre">SInt</span></code>)<a class="headerlink" href="#the-bitvector-family-bits-uint-sint" title="Permalink to this heading">¶</a></h2>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">BitVector</span></code> is a family of types for storing multiple bits of information in a single value. This type has three subtypes that can be used to model different behaviours:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">Bits</span></code> do not convey any sign information whereas the <code class="docutils literal notranslate"><span class="pre">UInt</span></code> (unsigned integer) and <code class="docutils literal notranslate"><span class="pre">SInt</span></code> (signed integer) provide the required operations to compute correct results if signed / unsigned arithmetics is used.</div>
</div>
<div class="section" id="declaration-syntax">
<h3>Declaration syntax<a class="headerlink" href="#declaration-syntax" title="Permalink to this heading">¶</a></h3>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 45%" />
<col style="width: 45%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Return</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Bits/UInt/SInt [()]</p></td>
<td><p>Create a BitVector, bits count is inferred</p></td>
<td><p>Bits/UInt/SInt</p></td>
</tr>
<tr class="row-odd"><td><p>Bits/UInt/SInt(x bits)</p></td>
<td><p>Create a BitVector with x bits</p></td>
<td><p>Bits/UInt/SInt</p></td>
</tr>
<tr class="row-even"><td><p>B/U/S(value : Int[,width : BitCount])</p></td>
<td><p>Create a BitVector assigned with ‘value’</p></td>
<td><p>Bits/UInt/SInt</p></td>
</tr>
<tr class="row-odd"><td><p>B/U/S”[[size’]base]value”</p></td>
<td><p>Create a BitVector assigned with ‘value’</p></td>
<td><p>Bits/UInt/SInt</p></td>
</tr>
<tr class="row-even"><td><p>B/U/S([x bits], element, …)</p></td>
<td><p>Create a BitVector assigned with the value specified by elements (see bellow table)</p></td>
<td><p>Bits/UInt/SInt</p></td>
</tr>
</tbody>
</table>
<p>Elements could be defined as follows:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Element syntax</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>x : Int -&gt; y : Boolean/Bool</p></td>
<td><p>Set bit x with y</p></td>
</tr>
<tr class="row-odd"><td><p>x : Range -&gt; y : Boolean/Bool</p></td>
<td><p>Set each bits in range x with y</p></td>
</tr>
<tr class="row-even"><td><p>x : Range -&gt; y : T</p></td>
<td><p>Set bits in range x with y</p></td>
</tr>
<tr class="row-odd"><td><p>x : Range -&gt; y : String</p></td>
<td><div class="line-block">
<div class="line">Set bits in range x with y</div>
<div class="line">The string format follow same rules than B/U/S”xyz” one</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>x : Range -&gt; y : T</p></td>
<td><p>Set bits in range x with y</p></td>
</tr>
<tr class="row-odd"><td><p>default -&gt; y : Boolean/Bool</p></td>
<td><div class="line-block">
<div class="line">Set all unconnected bits with the y value.</div>
<div class="line">This feature could only be use to do assignements without the U/B/S prefix</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>You can define a Range values</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Range syntax</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Width</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>(x downto y)</p></td>
<td><p>[x:y] x &gt;= y</p></td>
<td><p>x-y+1</p></td>
</tr>
<tr class="row-odd"><td><p>(x to y)</p></td>
<td><p>[x:y] x &lt;= y</p></td>
<td><p>y-x+1</p></td>
</tr>
<tr class="row-even"><td><p>(x until y)</p></td>
<td><p>[x:y[ x &lt; y</p></td>
<td><p>y-x</p></td>
</tr>
</tbody>
</table>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="n">myUInt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">UInt</span><span class="p">(</span><span class="mi">8</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w"></span>
<span class="n">myUInt</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nc">U</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w"></span>
<span class="n">myUInt</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nc">U</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<span class="n">myUInt</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nc">U</span><span class="s">&quot;0000_0101&quot;</span><span class="w">  </span><span class="c1">// Base per default is binary =&gt; 5</span>
<span class="n">myUInt</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nc">U</span><span class="s">&quot;h1A&quot;</span><span class="w">        </span><span class="c1">// Base could be x (base 16)</span>
<span class="w">                        </span><span class="c1">//               h (base 16)</span>
<span class="w">                        </span><span class="c1">//               d (base 10)</span>
<span class="w">                        </span><span class="c1">//               o (base 8)</span>
<span class="w">                        </span><span class="c1">//               b (base 2)</span>
<span class="n">myUInt</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nc">U</span><span class="s">&quot;8&#39;h1A&quot;</span><span class="w"></span>
<span class="n">myUInt</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">2</span><span class="w">             </span><span class="c1">// You can use scala Int as literal value</span>

<span class="kd">val</span><span class="w"> </span><span class="n">myBool</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">myUInt</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nc">U</span><span class="p">(</span><span class="mi">7</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">true</span><span class="p">,(</span><span class="mi">6</span><span class="w"> </span><span class="n">downto</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
<span class="kd">val</span><span class="w"> </span><span class="n">myBool</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">myUInt</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nc">U</span><span class="p">(</span><span class="n">myUInt</span><span class="p">.</span><span class="n">range</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w"></span>

<span class="c1">//For assignement purposes, you can omit the B/U/S, which also alow the use of the [default -&gt; ???] feature</span>
<span class="n">myUInt</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w">                       </span><span class="c1">//Assign myUInt with &quot;11111111&quot;</span>
<span class="n">myUInt</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="n">myUInt</span><span class="p">.</span><span class="n">range</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w">                  </span><span class="c1">//Assign myUInt with &quot;11111111&quot;</span>
<span class="n">myUInt</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="mi">7</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="n">default</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w">            </span><span class="c1">//Assign myUInt with &quot;10000000&quot;</span>
<span class="n">myUInt</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">((</span><span class="mi">4</span><span class="w"> </span><span class="n">downto</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="n">default</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="c1">//Assign myUInt with &quot;00011110&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h3>Operators<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 44%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operator</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Return</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>~x</p></td>
<td><p>Bitwise NOT</p></td>
<td><p>T(w(x) bits)</p></td>
</tr>
<tr class="row-odd"><td><p>x &amp; y</p></td>
<td><p>Bitwise AND</p></td>
<td><p>T(max(w(x), w(y) bits)</p></td>
</tr>
<tr class="row-even"><td><p>x | y</p></td>
<td><p>Bitwise OR</p></td>
<td><p>T(max(w(x), w(y) bits)</p></td>
</tr>
<tr class="row-odd"><td><p>x ^ y</p></td>
<td><p>Bitwise XOR</p></td>
<td><p>T(max(w(x), w(y) bits)</p></td>
</tr>
<tr class="row-even"><td><p>x(y)</p></td>
<td><p>Readbit, y : Int/UInt</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-odd"><td><p>x(hi,lo)</p></td>
<td><p>Read bitfield, hi : Int, lo : Int</p></td>
<td><p>T(hi-lo+1 bits)</p></td>
</tr>
<tr class="row-even"><td><p>x(offset,width)</p></td>
<td><p>Read bitfield, offset: UInt, width: Int</p></td>
<td><p>T(width bits)</p></td>
</tr>
<tr class="row-odd"><td><p>x(y) := z</p></td>
<td><p>Assign bits, y : Int/UInt</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-even"><td><p>x(hi,lo) := z</p></td>
<td><p>Assign bitfield, hi : Int, lo : Int</p></td>
<td><p>T(hi-lo+1 bits)</p></td>
</tr>
<tr class="row-odd"><td><p>x(offset,width) := z</p></td>
<td><p>Assign bitfield, offset: UInt, width: Int</p></td>
<td><p>T(width bits)</p></td>
</tr>
<tr class="row-even"><td><p>x.msb</p></td>
<td><p>Return the most significant bit</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-odd"><td><p>x.lsb</p></td>
<td><p>Return the least significant bit</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-even"><td><p>x.range</p></td>
<td><p>Return the range (x.high downto 0)</p></td>
<td><p>Range</p></td>
</tr>
<tr class="row-odd"><td><p>x.high</p></td>
<td><p>Return the upper bound of the type x</p></td>
<td><p>Int</p></td>
</tr>
<tr class="row-even"><td><p>x.xorR</p></td>
<td><p>XOR all bits of x</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-odd"><td><p>x.orR</p></td>
<td><p>OR all bits of x</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-even"><td><p>x.andR</p></td>
<td><p>AND all bits of x</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-odd"><td><p>x.clearAll[()]</p></td>
<td><p>Clear all bits</p></td>
<td><p>T</p></td>
</tr>
<tr class="row-even"><td><p>x.setAll[()]</p></td>
<td><p>Set all bits</p></td>
<td><p>T</p></td>
</tr>
<tr class="row-odd"><td><p>x.setAllTo(value : Boolean)</p></td>
<td><p>Set all bits to the given Boolean value</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>x.setAllTo(value : Bool)</p></td>
<td><p>Set all bits to the given Bool value</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>x.asBools</p></td>
<td><p>Cast into a array of Bool</p></td>
<td><p>Vec(Bool,width(x))</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="masked-comparison">
<h3>Masked comparison<a class="headerlink" href="#masked-comparison" title="Permalink to this heading">¶</a></h3>
<p>Some time you need to check equality between a <code class="docutils literal notranslate"><span class="pre">BitVector</span></code> and a bits constant that contain hole (don’t care values).</p>
<p>There is an example about how to do that :</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="n">myBits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Bits</span><span class="p">(</span><span class="mi">8</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w"></span>
<span class="kd">val</span><span class="w"> </span><span class="n">itMatch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myBits</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nc">M</span><span class="s">&quot;00--10--&quot;</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="bits">
<h2>Bits<a class="headerlink" href="#bits" title="Permalink to this heading">¶</a></h2>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 50%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operator</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Return</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>x &gt;&gt; y</p></td>
<td><p>Logical shift right, y : Int</p></td>
<td><p>T(w(x) - y bits)</p></td>
</tr>
<tr class="row-odd"><td><p>x &gt;&gt; y</p></td>
<td><p>Logical shift right, y : UInt</p></td>
<td><p>T(w(x) bits)</p></td>
</tr>
<tr class="row-even"><td><p>x &lt;&lt; y</p></td>
<td><p>Logical shift left, y : Int</p></td>
<td><p>T(w(x) + y bits)</p></td>
</tr>
<tr class="row-odd"><td><p>x &lt;&lt; y</p></td>
<td><p>Logical shift left, y : UInt</p></td>
<td><p>T(w(x) + max(y) bits)</p></td>
</tr>
<tr class="row-even"><td><p>x.rotateLeft(y)</p></td>
<td><p>Logical left rotation, y : UInt</p></td>
<td><p>T(w(x))</p></td>
</tr>
<tr class="row-odd"><td><p>x.resize(y)</p></td>
<td><p>Return a resized copy of x, filled with zero, y : Int</p></td>
<td><p>T(y bits)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="uint-sint">
<h2>UInt, SInt<a class="headerlink" href="#uint-sint" title="Permalink to this heading">¶</a></h2>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 50%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operator</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Return</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>x + y</p></td>
<td><p>Addition</p></td>
<td><p>T(max(w(x), w(y) bits)</p></td>
</tr>
<tr class="row-odd"><td><p>x - y</p></td>
<td><p>Subtraction</p></td>
<td><p>T(max(w(x), w(y) bits)</p></td>
</tr>
<tr class="row-even"><td><p>x * y</p></td>
<td><p>Multiplication</p></td>
<td><p>T(w(x) + w(y) bits)</p></td>
</tr>
<tr class="row-odd"><td><p>x &gt; y</p></td>
<td><p>Greater than</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-even"><td><p>x &gt;= y</p></td>
<td><p>Greater than or equal</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-odd"><td><p>x &lt; y</p></td>
<td><p>Less than</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-even"><td><p>x &lt;= y</p></td>
<td><p>Less than or equal</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-odd"><td><p>x &gt;&gt; y</p></td>
<td><p>Arithmetic shift right, y : Int</p></td>
<td><p>T(w(x) - y bits)</p></td>
</tr>
<tr class="row-even"><td><p>x &gt;&gt; y</p></td>
<td><p>Arithmetic shift right, y : UInt</p></td>
<td><p>T(w(x) bits)</p></td>
</tr>
<tr class="row-odd"><td><p>x &lt;&lt; y</p></td>
<td><p>Arithmetic shift left, y : Int</p></td>
<td><p>T(w(x) + y bits)</p></td>
</tr>
<tr class="row-even"><td><p>x &lt;&lt; y</p></td>
<td><p>Arithmetic shift left, y : UInt</p></td>
<td><p>T(w(x) + max(y) bits)</p></td>
</tr>
<tr class="row-odd"><td><p>x.resize(y)</p></td>
<td><p>Return an arithmetic resized copy of x, y : Int</p></td>
<td><p>T(y bits)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="bool-bits-uint-sint">
<h2>Bool, Bits, UInt, SInt<a class="headerlink" href="#bool-bits-uint-sint" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operator</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Return</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>x.asBits</p></td>
<td><p>Binary cast in Bits</p></td>
<td><p>Bits(w(x) bits)</p></td>
</tr>
<tr class="row-odd"><td><p>x.asUInt</p></td>
<td><p>Binary cast in UInt</p></td>
<td><p>UInt(w(x) bits)</p></td>
</tr>
<tr class="row-even"><td><p>x.asSInt</p></td>
<td><p>Binary cast in SInt</p></td>
<td><p>SInt(w(x) bits)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="vec">
<h2>Vec<a class="headerlink" href="#vec" title="Permalink to this heading">¶</a></h2>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Declaration</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Vec(type : Data, size : Int)</p></td>
<td><p>Create a vector of size time the given type</p></td>
</tr>
<tr class="row-odd"><td><p>Vec(x,y,..)</p></td>
<td><div class="line-block">
<div class="line">Create a vector where indexes point to given elements.</div>
<div class="line">this construct support mixed element width</div>
</div>
</td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 67%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operator</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Return</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>x(y)</p></td>
<td><p>Read element y, y : Int/UInt</p></td>
<td><p>T</p></td>
</tr>
<tr class="row-odd"><td><p>x(y) := z</p></td>
<td><p>Assign element y with z, y : Int/UInt</p></td>
<td></td>
</tr>
</tbody>
</table>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="n">myVecOfSInt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Vec</span><span class="p">(</span><span class="nc">SInt</span><span class="p">(</span><span class="mi">8</span><span class="w"> </span><span class="n">bits</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<span class="n">myVecOfSInt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<span class="n">myVecOfSInt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">myVecOfSInt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3</span><span class="w"></span>

<span class="kd">val</span><span class="w"> </span><span class="n">myVecOfMixedUInt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Vec</span><span class="p">(</span><span class="nc">UInt</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="n">bits</span><span class="p">),</span><span class="w"> </span><span class="nc">UInt</span><span class="p">(</span><span class="mi">5</span><span class="w"> </span><span class="n">bits</span><span class="p">),</span><span class="w"> </span><span class="nc">UInt</span><span class="p">(</span><span class="mi">8</span><span class="w"> </span><span class="n">bits</span><span class="p">))</span><span class="w"></span>

<span class="kd">val</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">UInt</span><span class="p">(</span><span class="mi">8</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w"></span>
<span class="kd">val</span><span class="w"> </span><span class="n">myVecOf_xyz_ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Vec</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)</span><span class="w"></span>
<span class="k">for</span><span class="p">(</span><span class="n">element</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">myVecOf_xyz_ref</span><span class="p">){</span><span class="w"></span>
<span class="w">  </span><span class="n">element</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="w">   </span><span class="c1">//Assign x,y,z with the value 0</span>
<span class="p">}</span><span class="w"></span>
<span class="n">myVecOf_xyz_ref</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">3</span><span class="w">    </span><span class="c1">//Assign y with the value 3</span>
</pre></div>
</div>
</div>
<div class="section" id="bundle">
<h2>Bundle<a class="headerlink" href="#bundle" title="Permalink to this heading">¶</a></h2>
<div class="line-block">
<div class="line">Bundles could be used to model data structure line buses and interfaces.</div>
<div class="line">All attributes that extends Data (Bool, Bits, UInt, …) that are defined inside the bundle are considered as part of the bundle.</div>
</div>
<div class="section" id="simple-example-rgb-vga">
<h3>Simple example (RGB/VGA)<a class="headerlink" href="#simple-example-rgb-vga" title="Permalink to this heading">¶</a></h3>
<p>The following example show an RGB bundle definition with some internal function.</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">case</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">RGB</span><span class="p">(</span><span class="n">channelWidth</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="p">)</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nc">Bundle</span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">red</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nc">UInt</span><span class="p">(</span><span class="n">channelWidth</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">green</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">UInt</span><span class="p">(</span><span class="n">channelWidth</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">blue</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nc">UInt</span><span class="p">(</span><span class="n">channelWidth</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w"></span>

<span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">isBlack</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">red</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">green</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">blue</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">isWhite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">U</span><span class="p">((</span><span class="n">channelWidth</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="n">downto</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">red</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">green</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">blue</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">max</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Then you can also incorporate a Bundle inside Bundle as deeply as you want:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">case</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">VGA</span><span class="p">(</span><span class="n">channelWidth</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="p">)</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nc">Bundle</span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">hsync</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Bool</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">vsync</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Bool</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">RGB</span><span class="p">(</span><span class="n">channelWidth</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>And finaly instanciate your Bundles inside the hardware :</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="n">vgaIn</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nc">VGA</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="w">         </span><span class="c1">//Create a RGB instance</span>
<span class="kd">val</span><span class="w"> </span><span class="n">vgaOut</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">VGA</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="w"></span>
<span class="n">vgaOut</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">vgaIn</span><span class="w">            </span><span class="c1">//Assign the whole bundle</span>
<span class="n">vgaOut</span><span class="p">.</span><span class="n">color</span><span class="p">.</span><span class="n">green</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="w">    </span><span class="c1">//Fix the green to zero</span>
<span class="kd">val</span><span class="w"> </span><span class="n">vgaInRgbIsBlack</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vgaIn</span><span class="p">.</span><span class="n">rgb</span><span class="p">.</span><span class="n">isBlack</span><span class="w">   </span><span class="c1">//Get if the vgaIn rgb is black</span>
</pre></div>
</div>
<p>If you want to specify your bundle as an input or an output of a Component, you have to do it by the following way :</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyComponent</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nc">Component</span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">io</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Bundle</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="n">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">(</span><span class="nc">RGB</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span><span class="w">    </span><span class="c1">//Don&#39;t forget the bracket around the bundle.</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="n">rsp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">out</span><span class="p">(</span><span class="nc">RGB</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="interface-example-apb">
<span id="interface-eaxample-apb"></span><h3>Interface example (APB)<a class="headerlink" href="#interface-example-apb" title="Permalink to this heading">¶</a></h3>
<p>If you want to define an interface, let’s imagine an APB interface, you can also use bundles :</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">APB</span><span class="p">(</span><span class="n">addressWidth</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="n">dataWidth</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="n">selWidth</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="n">useSlaveError</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Boolean</span><span class="p">)</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nc">Bundle</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PADDR</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nc">UInt</span><span class="p">(</span><span class="n">addressWidth</span><span class="w"> </span><span class="n">bit</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PSEL</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nc">Bits</span><span class="p">(</span><span class="n">selWidth</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PENABLE</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nc">Bool</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PREADY</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">Bool</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PWRITE</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">Bool</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PWDATA</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">Bits</span><span class="p">(</span><span class="n">dataWidth</span><span class="w"> </span><span class="n">bit</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PRDATA</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">Bits</span><span class="p">(</span><span class="n">dataWidth</span><span class="w"> </span><span class="n">bit</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PSLVERROR</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">useSlaveError</span><span class="p">)</span><span class="w"> </span><span class="nc">Bool</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="kc">null</span><span class="w">   </span><span class="c1">//This wire is created only when useSlaveError is true</span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Example of usage :</span>
<span class="kd">val</span><span class="w"> </span><span class="n">bus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">APB</span><span class="p">(</span><span class="n">addressWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="n">dataWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="n">selWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="n">useSlaveError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>One good practice is to group all construction parameters inside a configuration class.
This could make the parametrization much easier later in your components, especially if you have to reuse the same configuration at multiple places.
Also if one time you need to add another construction parameter, you will only have to add it into the configuration class and everywhere this one is instantiated:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">case</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">APBConfig</span><span class="p">(</span><span class="n">addressWidth</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="p">,</span><span class="w"></span>
<span class="w">                     </span><span class="n">dataWidth</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="p">,</span><span class="w"></span>
<span class="w">                     </span><span class="n">selWidth</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="p">,</span><span class="w"></span>
<span class="w">                     </span><span class="n">useSlaveError</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Boolean</span><span class="p">)</span><span class="w"></span>

<span class="k">class</span><span class="w"> </span><span class="nc">APB</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="n">config</span><span class="p">:</span><span class="w"> </span><span class="nc">APBConfig</span><span class="p">)</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nc">Bundle</span><span class="w"> </span><span class="p">{</span><span class="w">   </span><span class="c1">//[val] config, make the configuration public</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PADDR</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nc">UInt</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">addressWidth</span><span class="w"> </span><span class="n">bit</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PSEL</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nc">Bits</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">selWidth</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PENABLE</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nc">Bool</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PREADY</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">Bool</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PWRITE</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">Bool</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PWDATA</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">Bits</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">dataWidth</span><span class="w"> </span><span class="n">bit</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PRDATA</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">Bits</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">dataWidth</span><span class="w"> </span><span class="n">bit</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PSLVERROR</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">useSlaveError</span><span class="p">)</span><span class="w"> </span><span class="nc">Bool</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="kc">null</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Example of usage</span>
<span class="kd">val</span><span class="w"> </span><span class="n">apbConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">APBConfig</span><span class="p">(</span><span class="n">addressWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="n">dataWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="n">selWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="n">useSlaveError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
<span class="kd">val</span><span class="w"> </span><span class="n">busA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">APB</span><span class="p">(</span><span class="n">apbConfig</span><span class="p">)</span><span class="w"></span>
<span class="kd">val</span><span class="w"> </span><span class="n">busB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">APB</span><span class="p">(</span><span class="n">apbConfig</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Then at some points, you will probably need to use the APB bus as master or as slave interface of some components. To do that you can define some functions :</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nn">spinal</span><span class="p">.</span><span class="nn">core</span><span class="p">.</span><span class="n">_</span>

<span class="k">case</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">APBConfig</span><span class="p">(</span><span class="n">addressWidth</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="p">,</span><span class="w"></span>
<span class="w">                     </span><span class="n">dataWidth</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="p">,</span><span class="w"></span>
<span class="w">                     </span><span class="n">selWidth</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="p">,</span><span class="w"></span>
<span class="w">                     </span><span class="n">useSlaveError</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Boolean</span><span class="p">)</span><span class="w"></span>

<span class="k">class</span><span class="w"> </span><span class="nc">APB</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="n">config</span><span class="p">:</span><span class="w"> </span><span class="nc">APBConfig</span><span class="p">)</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nc">Bundle</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PADDR</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nc">UInt</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">addressWidth</span><span class="w"> </span><span class="n">bit</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PSEL</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nc">Bits</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">selWidth</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PENABLE</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nc">Bool</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PREADY</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">Bool</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PWRITE</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">Bool</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PWDATA</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">Bits</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">dataWidth</span><span class="w"> </span><span class="n">bit</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PRDATA</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">Bits</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">dataWidth</span><span class="w"> </span><span class="n">bit</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PSLVERROR</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">useSlaveError</span><span class="p">)</span><span class="w"> </span><span class="nc">Bool</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="kc">null</span><span class="w"></span>

<span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">asMaster</span><span class="p">():</span><span class="w"> </span><span class="bp">this</span><span class="p">.</span><span class="k">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">out</span><span class="p">(</span><span class="nc">PADDR</span><span class="p">,</span><span class="nc">PSEL</span><span class="p">,</span><span class="nc">PENABLE</span><span class="p">,</span><span class="nc">PWRITE</span><span class="p">,</span><span class="nc">PWDATA</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">in</span><span class="p">(</span><span class="nc">PREADY</span><span class="p">,</span><span class="nc">PRDATA</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">useSlaveError</span><span class="p">)</span><span class="w"> </span><span class="n">in</span><span class="p">(</span><span class="nc">PSLVERROR</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="bp">this</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="k">def</span><span class="w"> </span><span class="nf">asSlave</span><span class="p">():</span><span class="w"> </span><span class="bp">this</span><span class="p">.</span><span class="k">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">this</span><span class="p">.</span><span class="n">asMaster</span><span class="p">().</span><span class="n">flip</span><span class="p">()</span><span class="w"> </span><span class="c1">//Flip reverse all in out configuration.</span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Example of usage</span>
<span class="kd">val</span><span class="w"> </span><span class="n">apbConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">APBConfig</span><span class="p">(</span><span class="n">addressWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="n">dataWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="n">selWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="n">useSlaveError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
<span class="kd">val</span><span class="w"> </span><span class="n">io</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nc">Bundle</span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">masterBus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">APB</span><span class="p">(</span><span class="n">apbConfig</span><span class="p">).</span><span class="n">asMaster</span><span class="p">()</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">slaveBus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">APB</span><span class="p">(</span><span class="n">apbConfig</span><span class="p">).</span><span class="n">asSlave</span><span class="p">()</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Then to make that better, the spinal.lib integrate a small master slave utile named IMasterSlave. When a bundle extends IMasterSlave, it should implement/override the asMaster function. It give you the ability to setup a master or a slave interface by a smoother way :</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="n">apbConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">APBConfig</span><span class="p">(</span><span class="n">addressWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="n">dataWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="n">selWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="n">useSlaveError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"></span>
<span class="kd">val</span><span class="w"> </span><span class="n">io</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nc">Bundle</span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">masterBus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">master</span><span class="p">(</span><span class="n">apbConfig</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">slaveBus</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">slave</span><span class="p">(</span><span class="n">apbConfig</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>There is an example of an APB bus that implement this IMasterSlave :</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="c1">//You need to import spinal.lib._ to use IMasterSlave</span>
<span class="k">import</span><span class="w"> </span><span class="nn">spinal</span><span class="p">.</span><span class="nn">core</span><span class="p">.</span><span class="n">_</span>
<span class="k">import</span><span class="w"> </span><span class="nn">spinal</span><span class="p">.</span><span class="nn">lib</span><span class="p">.</span><span class="n">_</span>

<span class="k">case</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">APBConfig</span><span class="p">(</span><span class="n">addressWidth</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="p">,</span><span class="w"></span>
<span class="w">                     </span><span class="n">dataWidth</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="p">,</span><span class="w"></span>
<span class="w">                     </span><span class="n">selWidth</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="p">,</span><span class="w"></span>
<span class="w">                     </span><span class="n">useSlaveError</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Boolean</span><span class="p">)</span><span class="w"></span>

<span class="k">class</span><span class="w"> </span><span class="nc">APB</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="n">config</span><span class="p">:</span><span class="w"> </span><span class="nc">APBConfig</span><span class="p">)</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nc">Bundle</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="nc">IMasterSlave</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PADDR</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nc">UInt</span><span class="p">(</span><span class="n">addressWidth</span><span class="w"> </span><span class="n">bit</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PSEL</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nc">Bits</span><span class="p">(</span><span class="n">selWidth</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PENABLE</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nc">Bool</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PREADY</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">Bool</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PWRITE</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">Bool</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PWDATA</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">Bits</span><span class="p">(</span><span class="n">dataWidth</span><span class="w"> </span><span class="n">bit</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PRDATA</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nc">Bits</span><span class="p">(</span><span class="n">dataWidth</span><span class="w"> </span><span class="n">bit</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nc">PSLVERROR</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">useSlaveError</span><span class="p">)</span><span class="w"> </span><span class="nc">Bool</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="kc">null</span><span class="w">   </span><span class="c1">//This wire is created only when useSlaveError is true</span>

<span class="w">  </span><span class="k">override</span><span class="w"> </span><span class="k">def</span><span class="w"> </span><span class="nf">asMaster</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">out</span><span class="p">(</span><span class="nc">PADDR</span><span class="p">,</span><span class="nc">PSEL</span><span class="p">,</span><span class="nc">PENABLE</span><span class="p">,</span><span class="nc">PWRITE</span><span class="p">,</span><span class="nc">PWDATA</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">in</span><span class="p">(</span><span class="nc">PREADY</span><span class="p">,</span><span class="nc">PRDATA</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">useSlaveError</span><span class="p">)</span><span class="w"> </span><span class="n">in</span><span class="p">(</span><span class="nc">PSLVERROR</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="c1">//The asSlave is by default the flipped version of asMaster.</span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="enum">
<h2>Enum<a class="headerlink" href="#enum" title="Permalink to this heading">¶</a></h2>
<p>SpinalHDL support enumeration with some encodings :</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Encoding</p></th>
<th class="head"><p>Bit width</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>native</p></td>
<td></td>
<td><p>Use the VHDL enumeration system, this is the default encoding</p></td>
</tr>
<tr class="row-odd"><td><p>binarySequancial</p></td>
<td><p>log2Up(stateCount)</p></td>
<td><p>Use Bits to store states in declaration order (value from 0 to n-1)</p></td>
</tr>
<tr class="row-even"><td><p>binaryOneHot</p></td>
<td><p>stateCount</p></td>
<td><p>Use Bits to store state. Each bit correspond to one state</p></td>
</tr>
</tbody>
</table>
<p>Define a enumeration type:</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">object</span><span class="w"> </span><span class="nc">UartCtrlTxState</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nc">SpinalEnum</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Or SpinalEnum(defaultEncoding=encodingOfYouChoice)</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">sIdle</span><span class="p">,</span><span class="w"> </span><span class="n">sStart</span><span class="p">,</span><span class="w"> </span><span class="n">sData</span><span class="p">,</span><span class="w"> </span><span class="n">sParity</span><span class="p">,</span><span class="w"> </span><span class="n">sStop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newElement</span><span class="p">()</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Instantiate a enumeration signal and assign it :</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="n">stateNext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">UartCtrlTxState</span><span class="p">()</span><span class="w"> </span><span class="c1">// Or UartCtrlTxState(encoding=encodingOfYouChoice)</span>
<span class="n">stateNext</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nc">UartCtrlTxState</span><span class="p">.</span><span class="n">sIdle</span><span class="w"></span>

<span class="c1">//You can also import the enumeration to have the visibility on its elements</span>
<span class="k">import</span><span class="w"> </span><span class="nc">UartCtrlTxState</span><span class="p">.</span><span class="n">_</span>
<span class="n">stateNext</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">sIdle</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="data-bool-bits-uint-sint-enum-bundle-vec">
<h2>Data (Bool, Bits, UInt, SInt, Enum, Bundle, Vec)<a class="headerlink" href="#data-bool-bits-uint-sint-enum-bundle-vec" title="Permalink to this heading">¶</a></h2>
<p>All hardware types extends the Data class, which mean that all of them provide following operators :</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operator</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Return</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>x === y</p></td>
<td><p>Equality</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-odd"><td><p>x =/= y</p></td>
<td><p>Inequality</p></td>
<td><p>Bool</p></td>
</tr>
<tr class="row-even"><td><p>x.getWidth</p></td>
<td><p>Return bitcount</p></td>
<td><p>Int</p></td>
</tr>
<tr class="row-odd"><td><p>x ## y</p></td>
<td><p>Concatenate, x-&gt;high, y-&gt;low</p></td>
<td><p>Bits(width(x) + width(y) bits)</p></td>
</tr>
<tr class="row-even"><td><p>Cat(x)</p></td>
<td><p>Concatenate list, first element on lsb, x : Array[Data]</p></td>
<td><p>Bits(sumOfWidth bits)</p></td>
</tr>
<tr class="row-odd"><td><p>Mux(cond,x,y)</p></td>
<td><p>if cond ? x : y</p></td>
<td><p>T(max(w(x), w(y) bits)</p></td>
</tr>
<tr class="row-even"><td><p>x.asBits</p></td>
<td><p>Cast in Bits</p></td>
<td><p>Bits(width(x) bits)</p></td>
</tr>
<tr class="row-odd"><td><p>x.assignFromBits(bits)</p></td>
<td><p>Assign from Bits</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>x.assignFromBits(bits,hi,lo)</p></td>
<td><p>Assign bitfield, hi : Int, lo : Int</p></td>
<td><p>T(hi-lo+1 bits)</p></td>
</tr>
<tr class="row-odd"><td><p>x.assignFromBits(bits,offset,width)</p></td>
<td><p>Assign bitfield, offset: UInt, width: Int</p></td>
<td><p>T(width bits)</p></td>
</tr>
<tr class="row-even"><td><p>x.getZero</p></td>
<td><p>Get equivalent type assigned with zero</p></td>
<td><p>T</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="literals-as-signal-declaration">
<h2>Literals as signal declaration<a class="headerlink" href="#literals-as-signal-declaration" title="Permalink to this heading">¶</a></h2>
<p>Literals are generally use as a constant value. But you can also use them to do two things in a single one :</p>
<ul class="simple">
<li><p>Define a wire which is assigned with a constant value</p></li>
</ul>
<p>There is an example :</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="kd">val</span><span class="w"> </span><span class="n">cond</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="nc">Bool</span><span class="w"></span>
<span class="kd">val</span><span class="w"> </span><span class="n">red</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="nc">UInt</span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="n">bits</span><span class="p">)</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
<span class="kd">val</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">False</span><span class="w">          </span><span class="c1">//Bool wire which is by default assigned with False</span>
<span class="kd">val</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">U</span><span class="s">&quot;0100&quot;</span><span class="w">        </span><span class="c1">//UInt wire of 4 bits which is by default assigned with 4</span>
<span class="n">when</span><span class="p">(</span><span class="n">cond</span><span class="p">){</span><span class="w"></span>
<span class="w">  </span><span class="n">valid</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nc">True</span><span class="w"></span>
<span class="w">  </span><span class="n">value</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">red</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="howtodocument.html" class="btn btn-neutral float-left" title="How to HACK this documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, SpinalHDL.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: v1.3.1
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Tags</dt>
      <dd><a href="types.html">v1.3.1</a></dd>
      <dd><a href="../../../v1.3.8/SpinalHDL/Developers area/types.html">v1.3.8</a></dd>
      <dd><a href="../../../v1.5.0/SpinalHDL/Developers area/types.html">v1.5.0</a></dd>
      <dd><a href="../../../v1.6.0/SpinalHDL/Developers area/types.html">v1.6.0</a></dd>
      <dd><a href="../../../v1.8.0/SpinalHDL/Developers area/types.html">v1.8.0</a></dd>
    </dl>
    <dl>
      <dt>Branches</dt>
      <dd><a href="../../../dev/SpinalHDL/Developers area/types.html">dev</a></dd>
      <dd><a href="../../../master/SpinalHDL/Developers area/types.html">master</a></dd>
    </dl>
    <dl>
      <dt>Downloads</dt>
      <dd><a href="../../artefacts/SpinalHDL_docs-v1.3.1.">HTML</a></dd>
      <dd><a href="../../artefacts/SpinalHDL_docs-v1.3.1.pdf">PDF</a></dd>
    </dl>
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>